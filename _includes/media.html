<div class="recent-media">
  <h2>recent media</h2>
  {% if site.media %}
    <div class="media-grid-home">
      {% assign recent_media = site.media | sort: 'date' | reverse %}
      {% for item in recent_media limit: 3 %}
        <div class="media-card-small">
          <a href="{{ item.url | prepend: site.baseurl | prepend: site.url }}">
            <div class="media-thumbnail-small">
              {% if item.thumbnail %}
                <img src="{{ item.thumbnail | prepend: site.baseurl | prepend: site.url }}" alt="{{ item.title }}">
              {% elsif item.type == 'video' and item.link contains 'youtube.com' %}
                {% assign youtube_id = item.link | split: 'v=' | last | split: '&' | first %}
                <img src="https://img.youtube.com/vi/{{ youtube_id }}/hqdefault.jpg" alt="{{ item.title }}">
              {% else %}
                {% assign default_thumbnail = '/assets/media/default-' | append: item.type | append: '.svg' %}
                <img src="{{ default_thumbnail | prepend: site.baseurl | prepend: site.url }}" alt="{{ item.title }}">
              {% endif %}
            </div>
            <div class="media-info-small">
              <span class="media-type-small">{{ item.type }}</span>
              <h3>{{ item.title }}</h3>
              <p class="media-meta-small">
                {{ item.date | date: "%b %Y" }} • {{ item.person }}
              </p>
            </div>
          </a>
        </div>
      {% endfor %}
    </div>
    <p class="see-more"><a href="{{ '/media/' | prepend: site.baseurl | prepend: site.url }}">see all media →</a></p>
  {% else %}
    <p>No media yet...</p>
  {% endif %}
</div>
